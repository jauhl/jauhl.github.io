<!doctype html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Federschwinger</title>
</head>

<body>
    <h2>unged√§mpfter Federschwinger</h2>
    <canvas id="c" width="315" height="500" style="border-width:1px;border-style:solid"></canvas>

    <script src="https://gitcdn.xyz/repo/goessner/g2/master/src/g2.js"></script>

    <script>

let cnv = document.getElementById('c'),
    ctx = cnv.getContext('2d'),

    pi = Math.PI
    t0 = false;

    omega = pi,  // Periodendauer 2s weil omega_0 = 2*pi/T
    Amplitude = 100,
    y_0 = 200,

    A = {x:0, y:0},
    B = {x:A.x, y:y_0},

    Federschwinger = g2(),
    world = g2().clr()
                .view({x:150,y:50})

                .beg({lw:2, foz:15, fow:'bold'})
                    .use({grp:Federschwinger})
                    .ground({pts:[A.x-20, A.y, A.x+20, A.y]})
                .end()

                // Skala
                .lin({x1:-75, y1:0, x2:-75, y2:400}).mark({mrk:'tick', loc:[0, 1/8, 2/8, 3/8, 4/8, 5/8, 6/8, 7/8, 1], dir:1})
                    .txt({str:'0',x:-68,y:4}).txt({str:'200',x:-68,y:204}).txt({str:'400',x:-68,y:404})
                
    ;

function position(t) {
    B.y = Amplitude*Math.sin(omega*t) + y_0 // schwingt Amplitude um y=200

    Federschwinger.del()
                  .spring({x1:A.x, y1:A.y, x2:B.x, y2:B.y, h:20})
                      .label({str:'k',loc:'mid',off:-20})
                  .rec({x:B.x-20, y:B.y-30, b:40, h:30, fs:'@nodfill'})
                      .label({str:'m'})

}

function render(time) {
    if (!t0)
        t0 = time;
    position((time-t0)/1000);
    world.exe(ctx);
    requestAnimationFrame(render);
}

render();

    </script>
</body>
</html>
